<!DOCTYPE html>
<html lang="en">
<head>
  <title>Rodolfo Ocampo</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
  <script src="https://unpkg.com/@webcomponents/webcomponentsjs@^2/webcomponents-bundle.js"></script>
  <link rel="icon" href="./Images/yo.jpg">
   <script src="https://cdn.jsdelivr.net/npm/@magenta/music@1.0.0"> </script>
    <link href='https://fonts.googleapis.com/css?family=Codystar' rel='stylesheet'>
</head>

<link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@300;400&display=swap" rel="stylesheet">

<style>
  
  text
{
  text-align: left;
   font-family: 'Roboto Mono' ;
}

button {
  color: white !important;
}


.image-foot{
  font-size: 12px;
  font-style: italic;
}

body{
  text-align: center;
}

</style>
<body>


</head>
<body  onmousemove="myFunction(event, base)">



<div class = 'text'>
  

<div class="container" style='border-style: solid';>


<marquee>The chimpanzee and the human share about 99.5 per cent of their evolutionary history, yet most human thinkers regard the chimp as a malformed, irrelevant oddity while seeing themselves as stepping-stones to the Almighty.</marquee>



<marquee direction="down" width="100%" height="100" behavior="alternate" style="border:solid">
  <marquee behavior="alternate">
  <h1> Build course portfolio: an interactive story </h1>
    
    </marquee>
        
    </div>
    
  </marquee>
</marquee>
<br>

<h2> Introduction </h2>
<i><p class="image-foot">Note: this is a story of my learning journey for a build course. I have included images, video, music and web experiences to create an interactive experience. Click around! </p></i>

<p> When I started the writing about this learning journey, I only went back to Week 0 of the course. I soon realized that Gregory Bateson would not be very proud of me: things don't really start where you think they start. There is a context and there is a past. So I tried to make sense of mine, assuming its inevitable incompleteness, by going back to the other side of the world, to Mexico City. </p> 
<br>


<div class="diagrams">
<img class="diagrams" width="30%" src="Images/chapu.jpg""></img>
<br>
<p class="image-foot">Beautiful afternoon in Mexico City </p>
</div>

<br>
<p>This is where I grew up. A city that I only recently began to understand. In its complexity, I find reflections of myself. Now, from a distance, I see how its forests crafted my fascination with the natural world. I see how growing up in an urban environment made me slightly anthropocentric. I see how exposure to inequality, made me interested in understanding people and the systems in which they exist. In that cultural melting pot, where ruins of ancient Aztec Temples exist alongside 7-Elevens, I see my passion for art, both as an end and a tool.</p>

<br>
<div class="diagrams">
<img class="diagrams" width="30%" src="Images/stand.jpg"></img>
<br>
<p class="image-foot">A typical street snack stand (I'm craving some of those) </p>
</div>

<br>
<p>
In this city, I have created the most significant relationships and had the most influential conversations. Through my social groups, I am a part of a shared set of values that influence my behavior. When understanding a learning journey, which is, in essence, behavior, one needs to understand those shared value networks. How?
</p>

<br>
<video width="530" height="300" controls>
  <source src="Images/son.mp4" type="video/mp4">
  <source src="movie.ogg" type="video/ogg">
Your browser does not support the video tag.
</video>
<br>
<p style="width: 530;"class="image-foot">One of the last nights in Mexico City, playing Son Jarocho with "me mates". I remember listening to a podcast featuring G. Bell on my way there </p>
<br>
<p>For me, part of the answer lies on a project that started as an idea between two friends. We shared the belief that data opened an unprecedented opportunity to understand social problems better, and provide useful tools to solve them. To that end, we founded <a href="http://www.datalabitam.com/">Datalab ITAM</a> a student run lab where undergrads learn and use data science for social good. So far, the lab has worked on diverse projects and has trained dozens of interdisciplinary undergraduates on data skills. The last project I worked at the lab, after having graduated, was an art installation that used machine learning to bring attention to the issue of mass disappearances in Mexico by showing visitors a missing person similar to them. The project planted in me a seed at the intersection of technology, art and people
</p>
<br>

<div class="diagrams">
<img class="diagrams" width="30%" src="Images/caraacara.jpg"></img>
<br>
<p class="image-foot">A user being shown a very similar missing person to him </p>
</div>
<br>

<h2>Ma', I'm joining a cult</h2>
<p>
 The seed, nurtured by a contextual pot, eventually sprouted into a decision that surely surprised some people. "Mom, I'm quitting my job at Google to travel to Australia and join a cult led by a red-haired anthropologist." 
</p>
<br>

 <img width="40%" src="Images/fam.jpg"></img>
 <br>
 <p class="image-foot">Me and my family at the airport<p>
 

<br>
<p>
After boarding a 1000-hour flight to Canberra, here I am: a master's student at the 3Ai institute. In a new country on the other side of the world, where sightings of kangaroos are much more common than I had expected. Oh yes, and also in the middle of a pandemic. Suddenly, I had all of this time alone, which I have split almost equally between Canberra's outdoors and my computer screen. The world stopped and all I could do was learn. 
</p>
<br>

<p>
Mostly, I have been learning about something that we call a new branch of engineering. We don't exactly know what it is yet, but my best take at a one-sentence summary is: "things are always more complicated than you think". Everything exists across different domains and more importantly, everything is part of a system. We focus on technological ones and particularly a subset called cyberphysical systems. These are made of networked computers which sense and control physical processes. Self-driving cars, smart electrical grids and ecological monitoring sort of stuff. But they are not only made of wires and circuits, they interact across technical, social, political, ecological and ethical dimensions forming complex feedback loops. 
</p>
<br>

<p>
How do we unpack this complexity? Fortunately, we are not the first ones to ask. Norbert Wiener, fellow Mexican Arturo Rosenblueth, Margert Mead and a few others came up with a few ideas in the 40's. What resulted became the foundations of cybernetics, the science control and communication in the animal and the machine. This science looks at the world as a set of interconnected systems, with feedback loops that give rise to the emergence of complex behavior. These systems are everywhere: in our physiology, the biosphere or the internet. They exist wherever there is a form of control and feedback. With the rise of artificial intelligence, a door is opened to a new class of system: autonomous digital computers that control the physical world around us: cities, ecosystems and our bodies. Those are the systems we focus on at 3Ai.
</p>
<br>

<p>
A good way to study cyberphysical systems is to build them. We even have a whole course about it (which we call Build). Tutors guide us through fortnightly projects while giving us freedom to direct our own learning journey. Therefore, every student has a different one. This is mine. 
</p>

<br>
<h2> Musical experiments </h2>

<p>
One type of system that I am interested in is autonomous music generation. We can imagine a system that autonomously composes music, optimizing towards personalized user preferences. It would need a way to acquire user's feedback in the physical world. This could be a button, or an electronic dopamine sensor in the brain. In both cases, the user and the system influence each other in an intricate loop that exists across domains beyond electrical circuits, raising questions around human behavior, culture, aesthetics, artistic creation and biological reward mechanisms.
</p>

<br>

<p>
 For my first semester's final project, I set out to build a very basic prototype of an automatic music generator. My objective was to create some sort of experience in the browser that could generate music using user's feedback. To do that, I had to learn a bunch of stuff. First, I started with music theory. I have been playing music since a young age, but I did not know the theory behind composing a song. My introduction was <a href="https://www.youtube.com/watch?v=rgaTLrZGlk0"> this amazing 30 minute music theory crash course </a> by Andrew Huang, which gave me a good foundation for self-directed learning through different online resources. I also studied Adam Neely's great content and became inspired by his talk about the relationship between visual and auditory consonance, which motivated me to include a visual component to my prototype.
</p>
<br>
 
 <p>
  I realized that the best way to learn about the theory of making a song was to actually make one. So I grabbed a little MIDI keyboard I brought from Mexico and recorded a full song.
</p>
<br>
<br>
  <img src="Images/keyboard.jpg" width="30%"></img>
<br>
<p class="image-foot">Recording studio</p>
<p>
  My friends encouraged me to upload it to Spotify so now it's there (yes, that is a photo from one of my many Canberra bicycle rides and yes, I made up a nom de plume). Play it below!
</p>
 <br>

 <iframe clas="diagrams" src="https://open.spotify.com/embed/track/2CAizYDC83mWMmXCZdHx8e" width="300" height="380" frameborder="0" allowtransparency="true" allow="encrypted-media"></iframe>
 <br>
 
 

<h2> Musical Cybernetics </h2>
<p>
 The second step was to learn how to make music with code. I learned about the Musical Instrument Digital Interface (MIDI) standard in detail.

 I also started exploring the creation of music with code. I initially focused on Python. My exploration was a bit messy but very fun and I documented most of it in this in a <a href="https://github.com/rodolfoocampo/la_zona/blob/master/Hearing%2C%20feeling%20and%20computing.ipynb">Jupyter notebook</a></h4></li>
</p>
 <br>
 
<iframe clas="diagrams" src="hearing.html" width="100%" height="600px" frameborder="0" allowtransparency="true" allow="encrypted-media"></iframe>
<br>
 <br>
<p>
This exploration also had the intention of increasing my Python level, which was achieved.

The next step was to learn about <a href="https://magenta.tensorflow.org/"> Magenta</a>, an open source project by Google which contains the state-of-the-art machine learning models for music generation. I read around 50% of Alexandre DuBreuil's great book <a href="https://books.google.com.au/books/about/Hands_On_Music_Generation_with_Magenta.html?id=SUvODwAAQBAJ&redir_esc=y">Hands-On Music Generation with Magenta. </a> Initially, I played with the <a href="https://github.com/magenta/magenta">Python library </a>, but since I am interested in creating a web experience for my prototype, I moved to the <a href="https://github.com/magenta/magenta-js">JavaScript API </a>, also covered in the book. With that knowledge, I created an AI Chiptune Radio, which generates endless, never repeating songs (make sure to pause the Spotify player before playing this!).
</p>
<br>
<div class="container" style='border-style: solid';>

  <h2>AI CHIPTUNE RADIO</h2>
  <button class="btn btn-primary" onclick="start()">Start music</button> 
<p>
  Endless stream of real-time computer-generated retro-futuristic chiptune music. It's all generated here, in your browser, uniquely for you, using a neural network called variational auto encoder.
</p>
<div class="slidecontainer">

  <p id='bpm_label'> <p id='tempo'> Adjust BPMs</p> </p>
  <input type="range" onchange="setTempo(document.getElementById('bpm_range').value)" min="60" max="140" value="100" class="slider" id="bpm_range">
</div>
<button class="btn btn-danger" onclick="stop()">Stop music</button>
<br>
</br> 
</div>
<br>
<p>
Here, the only "feedback" received by the user is the adjustment of tempo. It is still very primitive, but it was a good first step.
</p>
<br>



<h2> Browser Experiments </h2>

Playing with magenta.js led me to become more interested in JavaScript and its possibilities for fun interactions in the browser. I created a few web experiments that explore some cybernetic concept, like randomness, agency, initial conditions, feedback loops and entropy. This website, itself, is one of those experiments. I created all of it from scratch using only JavaScript, CSS and HTML.

 Try the experiments below!
 <br>

<br>
<div class="container" style='border-style: solid';>
<h4>Color experiment </h4> 
<p><b> Cybernetic Concepts: randomness, agency, initial conditions </p></b>   

<p id = 'intro'>

  If you tap the screen or move your mouse around, you will see that the color changes accordingly. Try to find your favorite. 
  </br>
  </br> 
  <strong>You will start to notice patterns, </strong> but you will also notice that your options are limited. One of the three components that determine a color was set randomly and remains fixed. The other two can be manipulated with the <strong>X</strong> and <strong>Y</strong> coordinates of your screen tap or cursor. 

  </br>
  </br>
  <strong>But wait! </strong> You can roll the dice again to change your fixed variable for a new random number. If you want to find your favorite color, when will you decide to roll vs. keep with your options? How do you navigate between randomness and agency? 

  </br>
  </p>
  </br>


<button type="button" onclick="dice()" class="btn btn-primary">Roll the dice</button>
</br>
<p>
</br>
</div>


</br> 
<div class="container" style='border-style: solid';>
<h4>The taco game experiment!</h4>
<p><b>Concepts: feedback loops, reward mechanisms</b></p>

<p>Press the following button and the word "taco" will be randomly inserted somewhere in the text. If you find one, click it to earn a point. It's hard, but don't desist! The victory high is worth it. </p>

<button id = 'taco'type="button" onclick="insertTaco()" class="btn btn-primary">Insert taco</button>
</br> 
<p id = 'taco_score'></p>

<p><strong>Why?</strong></p>
<p>
 This game illustrates how our dopamine reward system is closely coupled with our ability to distinguish signal from noise. Here, my website's text is the noise and the taco is your signal. 

I suspect that such a signal-reward mechanism is closely related to our enjoyment of music. As Laura Ferreri, et al, wrote in the 2019 <a href="https://www.pnas.org/content/116/9/3793">paper </a> "Dopamine modulates the reward experiences elicited by music":

</br> 
</br> 
<i>"Understanding how the brain translates a structured sequence of sounds, such as music, into a pleasant and rewarding experience is a fascinating question which may be crucial to better understand the processing of abstract rewards in humans." 
</i>

</br> 
</br> 
Behavior is driven by reward systems. Systems that are cybernetic and that become a part of cyberphysical systems.


</br> 
</br> 

</br> 
</div>

</br> 
<div class="container" style='border-style: solid';>
<h4>The chaotic taco game!</h4>
<h5>Concepts: feedback loops, reward mechanism, randomness, chaos, entropy</h5>

<p>
 Same game, but now the website text will be random nonsense blob of characters, except for the word 'taco'. Is finding the taco easier?</p>


<button id='chaos'type="button" onclick="chaos()" class="btn btn-primary">Unleash Taco Chaos</button> <p display='none'>  
  </br> 
</div>

<h2>Putting it into action</h2>

I put some skills showcased above into action for one of our assignments, where we were tasked with building a data visualization. I chose to add a sonic component and use a new library I started learning, <a href="https://tonejs.github.io/">Tone.js.</a> My intention for this assignment was to interrogate our predominant visual relationship with data. After moving into cities, where acute hearing and smelling is not a crucial tool for survival, did we lose our ability to understand the world through non-visual information? 
What do we lose when approaching the world mainly with one sense? You can visit the <a href="https://musicalize-data.herokuapp.com/">experiment's website </a> or play with it directly below
<br>
<br>

<iframe src="https://musicalize-data.herokuapp.com/" title="Musicalize Data" style="width: 100%; height:400px"></iframe>




<br>
<br>
 
<h2>Ant attacks and prototypes</h2>

<br>

One day, as I was cycling around Lake Burley Griffin, I decided to stop and catch the view from the side of the track. Little did I know that in Australia, stepping down from your bicycle often means stepping on an ant colony. Unknowingly, I was standing on the gate of a big one, and I was not welcome. I felt a burning pain on my leg only to look down and see a bunch of meat ants, clung to my leg with little mighty jaws. As I fought to take them off, I dropped my bike which was quickly captured by the enemy.

<br>
<br>
<video width="500" height="300" controls>
  <source src="Images/ants.mp4" type="video/mp4">
Your browser does not support the video tag.
</video>
<br>
<p class="image-foot">The "incident"</p>
<br>

<p>
I seriously considered jumping into the lake to get them off, but eventually, frantic movements did the job. Fortunately, their jaws are not strong enough to pierce the human skin in one go, so their biting served only as a warning. More importantly, it served as a lesson on collective intelligence. How did this little kind-of-dumb agents coordinate their actions so effectively protect their home. How does intelligent behavior emerge from unintelligent components? I became fascinated by ants and the concept of collective intelligence, and I soon learned that it is closely related to cybernetics. I began reading A New Kind of Science by Stephen Wolfram and became fascinated by cellular automata, a simple mathematical concept originally proposed by John von Neumann where simple components of a system interact with each other according to simple rules, at sequential time steps. After a few iterations, interesting things emerge: complexity, behavior, feedback loops and, if visualized, beautiful visual patterns. Could any cybernetic system be simulated by cellular automata? But more importantly, how can I use this for my prototype?

 A few days later, I came across <a href="https://p5js.org/">p5.js </a>, a great tool for creating visual art in the browser, developed by Lauren McCarthy. I started learning it mainly through Daniel Shiffman's <a href="https://www.youtube.com/watch?v=8j0UDiN7my4"> AMAZING course. </a> 
</p>
<br>
<br>
<p>
I realized that I could combine p5.js and Tone.js to create an interactive visual, musical experience in the browser using cellular automata. Below are some of my early explorations. None of the patterns were explicitly programmed! They all emerged from simple initial states (a few initial little circles) and simple rules of interaction between them. 
</p>
<br>
<br>

<video width="300" height="300" controls>
  <source src="Images/pattern1.mov" type="video/mp4">
Your browser does not support the video tag.
</video>

<video width="300" height="300" controls>
  <source src="Images/pattern3.mov" type="video/mp4">
Your browser does not support the video tag.
</video>

<video width="300" height="300" controls>
  <source src="Images/pattern4.mov" type="video/mp4">
Your browser does not support the video tag.
</video>

<br>
<br>

<p>
After this fun exploration, I went on a created my prototype, where users can define the initial conditions and rules. In cellular automata, the state of a cell depends on the state of its neighbors. You can play with the project below or go to directly to <a href="https://musical-automata.glitch.com/">https://musical-automata.glitch.com</a> Go on, click on the blue square to plant a seed and hit create. What happens when you change the numbers in the system rules? What happens when you plant another seed once the automaton is already running?

<i>Emergency update: the hosting service for the project seems to be having issues so the page is not showing correctly and you cannot actually play with the project at the moment</i>
<img src="update.png"></img>
</p>
<br>

<iframe src="https://musical-automata.glitch.me/" title="Musical Automata" style="width: 100%; height:700px"></iframe>

<h2> New possibilities </h2>

<p>
This prototype achieved my initial goal of creating a generative music system that receives feedback from a user. However, I believe the music component is still far from being something enjoyable. In contrast, I believe that the visual one is much more interesting. 

I also think that beyond art generation, my prototype could be used as an educational tool for teaching about cellular automata, cybernetics and complex systems. At the time of writing this, I have not found an easy-to-use browser based tool for exploring cellular automata, so my hope is to share it with the academic community (and would love help with that too!).
</p>

<h2> Beyond cybernetic art </h2>

<p>
Inspired by the ideas of Stephen Wolfram, Sean Carroll and complex systems theory, I developed this little diagram for my own understanding.
</p>

<img src="Images/complexity.png" width="70%"></img>
<br>
<br>
<p>
There are many things that can be studied along the blue continuum, and one of particular interest during the course was Artificial Intelligence. Here, I will show two of the assignments related to it. 
</p>
<br>
<h4> Artificial Intelligent game-playing agents</h4>
<p>
One of the main ways in which AI is being developed is through the creation of game playing agents that are able to exhibit some form of intelligent behavior. We were tasked with creating a Tic Tac Toe playing agent. For my agent, I implemented the minimax algorithm, one of the fundamental algorithms of classical AI (non-deep learning approach) and created a Jupyter tutorial on how to make one.
<p>
<br>
<br>
 <iframe src="tictutorial.html" style="width: 100%; height:500px"></iframe>

<br>
<br>
 <h4> Map of AI </h4>

<p>
For this assignment, we were tasked with creating a map of AI research, in whatever form we preferred. I went on to create a genealogy, where each new branch is a new paradigm and which is associated to a seminal paper. In my map, it all stems from an original source. I am aware this is a very reductionist approach but it is useful for gaining a view of how the field has developed. Of course this map is non-extensive and I have also left a lot of important papers. However, I think this is a good start and could be a useful resource for the students of AI.
</p>
<br>
<div class="diagrams" style="width: 100%; height: 480px; margin: 10px;"><iframe allowfullscreen frameborder="0" style="width:100%; height:480px" src="https://app.lucidchart.com/documents/embeddedchart/a1cb6069-f886-4abe-877a-14fc2ce7c6ef" id="0XE5YMyOXM1x"></iframe></div>
</br>


<h3>Next steps: where do I go from here?</h3>


</br>
<p>

A new branch of engineering requires a new way of thinking. One where knowledge boundaries are crossed in search for a systemic thread. Such endeavor will reveal, even if just a little, the beautiful network of which everything is a part.
</p>
<br>
<br>
<div style="width: 80%">
<p><i>"I love science, and it pains me to think that so many are terrified of the subject or feel that choosing science means you cannot also choose compassion, or the arts, or be awed by nature. Science is not meant to cure us of mystery, but to reinvent and reinvigorate it.”</i></p>
<br>
<br>
</div>
<p>
It is in that spirit in which I want to pursue science further. For now, I will apply this semester's learning in a new field beyond art for my final cyberphysical system project: the environment. In the future, my intention is to study a PhD and use my learnings from this semester as part of my foundation.
<br>
Through the build course, I learned skills that I have used to explore concepts of cybernetics. I have used the skills learned through the build course to explore concepts of cybernetics. In combining them with learnings from the Questions course (and ant attack experiences), I have started weaving a pot that will nurture the seed planted on the other side of the world.


</p>
<br>
<br>

<div class="diagrams">
<img class="diagrams" width="50%" src="Images/canberra.jpg"></img>
<br>
<p class="image-foot">A beautiful afternoon in Canberra  </p>
</div>
<br>
<br>

</div>
  <marquee>The universe (which others call the Library) is composed of an indefinite,
perhaps infinite number of hexagonal galleries. In the center of each gallery
is a ventilation shaft, bounded by a low railing. From any hexagon one can
see the floors above and below-one after another, endlessly. The arrangement of the galleries is always the same: Twenty bookshelves, five to each
side, line four of the hexagon's six sides; the height of the bookshelves, floor
to ceiling, is hardly greater than the height of a normal librarian. One of the
hexagon's free sides opens onto a narrow sort of vestibule, which in turn
opens onto another gallery, identical to the first-identical in fact to all.
To the left and right of the vestibule are two tiny compartments. One is
for sleeping, upright; the other, for satisfying one's physical necessities.
Through this space, too, there passes a spiral staircase, which winds upward
and downward into the remotest distance. In the vestibule there is a mirror,
which faithfully duplicates appearances. Men often infer from this mirror
that the Library is not infinite-if it were, what need would there be for that
illusory replication? I prefer to dream that burnished surfaces are a figuration and promise of the infinite ... . Light is provided by certain spherical
fruits that bear the name "bulbs." There are two of these bulbs in each hexagon, set crosswise. The light they give is insufficient, and unceasing. </marquee>

</div>
</div>
    

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script>

taco_game_points = 0;

$("body").css("background-color", 'rgb(' + 200 + ',' + 100 + ',' + 240 + ')');


document_width =  $(document).width();

function getRandomInt(n) {
  return Math.floor(Math.random() * n);
}
function chaos() {
  var s = $('#intro').text()
  var arr = s.split('');           // Convert String to array
  var n = arr.length;              // Length of the array
  
  for(var i=0 ; i<n-1 ; ++i) {
    var j = getRandomInt(n);       // Get random of [0, n-1]
    
    var temp = arr[i];             // Swap arr[i] and arr[j]
    arr[i] = arr[j];
    arr[j] = temp;
  }
  
  s = arr.join('');  
  $('p').text(s);
  insertTaco();


             // Convert Array to string
  return s;                        // Return shuffled string
}

base = Math.floor((Math.random() *100) + 150);
function dice() {
  base = Math.floor((Math.random() *100) + 150);
  $("body").css("background-color", 'rgb(' + scaledX + ',' + scaledY + ',' + base + ')')
  return base;
}



function myFunction(e, base) {
  var x = e.clientX;
  var y = e.clientY;
  scaledX = Math.floor((x/document_width)*100) + 150
  scaledY = Math.floor((y/document_width)*100) + 150
  combined = scaledX + scaledY%80
  

  var rgbvalue = 'rgb(' + scaledX + ',' + scaledY + ',' + base + ')';
  $("body").css("background-color", rgbvalue);
  text = scaledX + ',' + scaledY;
  height = $(document).width();
  
}

var selected_p_index;
var original_text = '';
function insertTaco() {
  var i;
  selected_p_tag = document.querySelectorAll("p");
  selected_p_index = getRandomInt(selected_p_tag.length);
  i = getRandomInt(selected_p_index);
  
  var past_string = selected_p_tag[i].innerHTML;
  var selected_position = getRandomInt(past_string.length)
  new_string = past_string.insert(selected_position, "<a style='color: black;' onclick='add_points()'>taco</a> ");
  console.log(selected_position)

  selected_p_tag[i].innerHTML = new_string;

  $('#taco').text('Insert another taco')

  
}

var seen = []
function add_points(){
  
  if (seen.includes(selected_p_index) == false){
    taco_game_points = taco_game_points + 1;
    $('#taco_score').text('New tacos found: ' + taco_game_points);
    console.log(taco_game_points)
    seen.push(selected_p_index);
  }
  
}



String.prototype.insert = function(index, string) {
  if (index > 0)
  {
    return this.substring(0, index) + string + this.substring(index, this.length);
  }

  return string + this;
};

//Example of use:
// Instantiate the model by specifying the desired checkpoint.
const model = new mm.MusicVAE(
  'https://storage.googleapis.com/magentadata/js/checkpoints/music_vae/trio_4bar');

const player = new mm.Player();

let stopSignal = false;
let count = 0;
let tempo = 80;

const sampleAndPlayForever = () => {
  player.stop();
  count += 1;
  
  return model.sample(1)
    .then((samples) => player.start(samples[0], tempo))
    .then(stopSignal ? undefined : sampleAndPlayForever)
};

const changeTempo = (delta) => {
  tempo = Math.max(Math.min(tempo + delta * 10, 120), 40);
  const tempoCounter = document.getElementById('tempo');
  
  tempoCounter.innerHTML = `${tempo} bpm`;
}

function setTempo(tempo_new) {
  tempo = tempo_new;
  const tempoCounter = document.getElementById('tempo');  
  tempoCounter.innerHTML = `${tempo} bpm`;
}

const start = () =>  {
  tempo = document.getElementById('bpm_range').value
  
  mm.Player.tone.context.resume();  // Required on mobile.
  
  
  stopSignal = false;
  sampleAndPlayForever();
};

const stop = () => {
  stopSignal = true;
  player.stop();
  

  document.getElementById('start').style.display = "block";
};

model.initialize().then(stop);


document.addEventListener('play', function(e){
    var audios = document.getElementsByTagName('audio');
    for(var i = 0, len = audios.length; i < len;i++){
        if(audios[i] != e.target){
            audios[i].pause();
        }
    }
}, true)

</script>


<script>
/*
const synth = new Tone.AMSynth().toMaster()

//attach a listener to the keyboard events
document.querySelector('tone-keyboard').addEventListener('noteon', e => {
  synth.triggerAttack(e.detail.name)
  
})

document.querySelector('tone-keyboard').addEventListener('noteoff', e => {
  synth.triggerRelease()
})
*/
</script>

</body>
</html>

